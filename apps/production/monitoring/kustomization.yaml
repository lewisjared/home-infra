apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  # Namespace
  - namespace.yaml

  # Authelia ForwardAuth middleware
  - middleware.yaml

  # Helm sources
  - sources/

  # LGTM stack components
  - loki/
  - tempo/
  - prometheus/

  # NOTE: Grafana is deployed via separate Flux Kustomizations:
  # - grafana-operator (deploys operator and CRDs)
  # - grafana-instance (deploys Grafana CR and datasources)
  # See clusters/production/grafana-*.yaml

  # Alloy for ingestion
  - alloy/

  # Network policies
  - network-policies/

  # Ingresses
  - ingresses/

  # NOTE: Grafana dashboards are now managed via GrafanaDashboard CRDs
  # See apps/production/monitoring/grafana/instance/dashboards.yaml

  # Hubble UI (Cilium network observability)
  - hubble-ui/
